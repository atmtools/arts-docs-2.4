<!DOCTYPE html>
<html lang="en">
<head>
<title>pndFromPsd - ARTS built-in documentation server</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="../styles.css">
</head>
<body>
<div id="navbar"><div class="breadcrumbs"><a href="../index.html">Home</a>&nbsp;>>&nbsp;<a href="../methods.html">Methods</a>&nbsp;>>&nbsp;pndFromPsd</div>
<div class="goto">Go to: <a href="../groups/index.html">Groups</a>&nbsp;-&nbsp;<a href="../variables/index.html">Variables</a>&nbsp;-&nbsp;<a href="index.html">Methods</a>&nbsp;-&nbsp;<a href="../agendas/index.html">Agendas</a></div></div>
<div class="content">
<h1>ARTS built-in documentation server</h1>
<h2>Workspace Method pndFromPsd</h2>
<h3>Description</h3>
<pre>
Calculates <a href="../variables/pnd_data.html">pnd_data</a> from given <a href="../variables/psd_data.html">psd_data</a> for one scattering species.

Performs integration of the size distribution over the size grid
bin deriving pnd (units #/m3) from psd (units #/m3/m). Some checks
on the sufficiency of the size grid range and coverage are applied.

*quad_order* can be 0 for rectangular or 1 for trapezoidal
integration. The only difference is the treatment of the start and
end nodes. For trapezoidal their corresponding bins end exactly at
the nodes, while for rectangular they extend further out by the half
distance to the neighbor node (but not beyond 0).

Attempts to check that the size grids and <a href="../variables/scat_data.html">scat_data</a> represent the
bulk extinction sufficiently. Specifically, it is tested that
 (a) psd*ext is decreasing at the small and large particle size
     ends of the size grid - but only if scattering species bulk
     extinction exceeds 1% of *threshold_ss_ext*.
 (b) removing the smallest and largest particles changes the
     resulting bulk extinction by less then a fraction of
     *threshold_se_ext* - but only if scattering species bulk
     extinction exceeds *threshold_ss_ext* and number density (pnd)
     of the edge size point at this atmospheric level is larger
     than *threshold_se_pnd* times the maximum pnd of this
     scattering element over all atmospheric levels.
Skipping tests in case of low extinction is done in order to
minimize issues arising from very low mass densities,
particularly at single atmospheric levels, and very low bulk
extinctions, i.e. in cases where the effects on the radiance fields
are estimated to be low.
NOTE: The tests are only approximate and do not guarantee the
validity of the resulting bulk properties (and increasing the
thresholds will decrease the reliability of the bulk properties).

</pre>

<p><b>Authors: </b>Jana Mendrok, Patrick Eriksson
<h3>Synopsis</h3>
<p><table><tr><td>pndFromPsd(&nbsp;</td><td><a href="../variables/pnd_data.html">pnd_data</a>, <a href="../variables/dpnd_data_dx.html">dpnd_data_dx</a>, <a href="../variables/pnd_size_grid.html">pnd_size_grid</a>, <a href="../variables/psd_data.html">psd_data</a>, <a href="../variables/psd_size_grid.html">psd_size_grid</a>, <a href="../variables/dpsd_data_dx.html">dpsd_data_dx</a>, <a href="../variables/scat_data.html">scat_data</a>, <a href="../variables/f_grid.html">f_grid</a>, <a href="../variables/scat_data_checked.html">scat_data_checked</a>, quad_order, scat_index, threshold_se_ext, threshold_ss_ext, threshold_se_pnd )</td></tr></table>
<h3>Variables</h3>
<table>
<tr><td>OUT</td><td class="right"><a href="../variables/pnd_data.html">pnd_data</a></td><td>(<a href="../groups/Matrix.html">Matrix</a>)</td><td>Particle number density values for a set of points.</td></tr>
<tr><td>OUT</td><td class="right"><a href="../variables/dpnd_data_dx.html">dpnd_data_dx</a></td><td>(<a href="../groups/Tensor3.html">Tensor3</a>)</td><td>Partial derivates of <a href="../variables/pnd_data.html">pnd_data</a>.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/pnd_size_grid.html">pnd_size_grid</a></td><td>(<a href="../groups/Vector.html">Vector</a>)</td><td>The particle sizes associated with <a href="../variables/pnd_data.html">pnd_data</a>.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/psd_data.html">psd_data</a></td><td>(<a href="../groups/Matrix.html">Matrix</a>)</td><td>Particle size distribution values for a set of points.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/psd_size_grid.html">psd_size_grid</a></td><td>(<a href="../groups/Vector.html">Vector</a>)</td><td>The particle sizes associated with <a href="../variables/psd_data.html">psd_data</a>.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/dpsd_data_dx.html">dpsd_data_dx</a></td><td>(<a href="../groups/Tensor3.html">Tensor3</a>)</td><td>Partial derivates of <a href="../variables/psd_data.html">psd_data</a>.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/scat_data.html">scat_data</a></td><td>(<a href="../groups/ArrayOfArrayOfSingleScatteringData.html">ArrayOfArrayOfSingleScatteringData</a>)</td><td>Array of single scattering data.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/f_grid.html">f_grid</a></td><td>(<a href="../groups/Vector.html">Vector</a>)</td><td>The frequency grid for monochromatic pencil beam calculations.</td></tr>
<tr><td>IN</td><td class="right"><a href="../variables/scat_data_checked.html">scat_data_checked</a></td><td>(<a href="../groups/Index.html">Index</a>)</td><td>OK-flag for <a href="../variables/scat_data.html">scat_data</a>.</td></tr>
<tr><td>GIN</td><td class="right">quad_order</td><td>(<a href="../groups/Index.html">Index</a>, Default: 1)</td><td>Order of bin quadrature.</td></tr>
<tr><td>GIN</td><td class="right">scat_index</td><td>(<a href="../groups/Index.html">Index</a>)</td><td>Take data from scattering species of this index (0-based) in <a href="../variables/scat_data.html">scat_data</a>.</td></tr>
<tr><td>GIN</td><td class="right">threshold_se_ext</td><td>(<a href="../groups/Numeric.html">Numeric</a>, Default: 0.02)</td><td>Maximum allowed extinction fraction in each of the edge size bins.</td></tr>
<tr><td>GIN</td><td class="right">threshold_ss_ext</td><td>(<a href="../groups/Numeric.html">Numeric</a>, Default: 1e-8)</td><td>Minimum bulk extinction in the processed scattering species for which to apply size grid representation checks.</td></tr>
<tr><td>GIN</td><td class="right">threshold_se_pnd</td><td>(<a href="../groups/Numeric.html">Numeric</a>, Default: 0.02)</td><td>Minimum ratio of edge point pnd to maximum pnd of this scattering element over all pressure levels.</td></tr>
</table>
</div>
<div class="footer">Page generated by arts-2.4.0 (git: 4fb77825)</div>

</body>
</html>